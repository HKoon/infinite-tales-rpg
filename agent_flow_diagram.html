<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Tales RPG - Agent ç³»ç»Ÿåˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        
        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }
        
        .agent-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .agent-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }
        
        .agent-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 8px;
        }
        
        .agent-card p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .trigger-section, .prompt-section {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .trigger-section h4, .prompt-section h4 {
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .trigger-text {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .prompt-text {
            color: #444;
            font-size: 0.9em;
            line-height: 1.4;
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .mermaid-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .architecture-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-top: 4px solid #667eea;
        }
        
        .feature-card h4 {
            color: #2c3e50;
            margin-bottom: 12px;
            font-size: 1.2em;
        }
        
        .feature-card p {
            color: #666;
            line-height: 1.5;
            margin: 0;
        }
        
        .collapsible {
            background-color: #667eea;
            color: white;
            cursor: pointer;
            padding: 15px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 16px;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }
        
        .collapsible:hover {
            background-color: #5a6fd8;
        }
        
        .collapsible.active {
            background-color: #4a5bc4;
        }
        
        .content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #f1f1f1;
            border-radius: 0 0 8px 8px;
            margin-bottom: 15px;
        }
        
        .content.show {
            display: block;
            padding: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Infinite Tales RPG - Agent ç³»ç»Ÿæ¶æ„åˆ†æ</h1>
        
        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">æ€» Agent æ•°é‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">æ ¸å¿ƒæ¸¸æˆ Agent</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">4</div>
                <div class="stat-label">å†…å®¹ç”Ÿæˆ Agent</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">è¾…åŠ©åŠŸèƒ½ Agent</div>
            </div>
        </div>

        <!-- Agent è°ƒç”¨æµç¨‹å›¾ -->
        <div class="section">
            <h2>ğŸ”„ Agent è°ƒç”¨æµç¨‹å›¾</h2>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph TD
                        Start([æ¸¸æˆå¼€å§‹]) --> StoryAgent[StoryAgent<br/>æ•…äº‹è®¾å®šç”Ÿæˆ]
                        Start --> CharacterAgent[CharacterAgent<br/>è§’è‰²æè¿°ç”Ÿæˆ]
                        Start --> CampaignAgent[CampaignAgent<br/>æˆ˜å½¹ç”Ÿæˆ]
                        
                        StoryAgent --> CharacterStatsAgent[CharacterStatsAgent<br/>è§’è‰²å±æ€§ç”Ÿæˆ]
                        CharacterAgent --> CharacterStatsAgent
                        
                        CharacterStatsAgent --> GameLoop{æ¸¸æˆä¸»å¾ªç¯}
                        CampaignAgent --> GameLoop
                        
                        GameLoop --> ActionAgent[ActionAgent<br/>åŠ¨ä½œç”Ÿæˆä¸è¯„ä¼°]
                        ActionAgent --> |ç©å®¶é€‰æ‹©åŠ¨ä½œ| GameAgent[GameAgent<br/>æ•…äº‹æ¨è¿›æ ¸å¿ƒ]
                        
                        GameAgent --> |æˆ˜æ–—æ¨¡å¼| CombatAgent[CombatAgent<br/>æˆ˜æ–—å¤„ç†]
                        CombatAgent --> GameAgent
                        
                        GameAgent --> |è¯„ä¼°äº‹ä»¶| EventAgent[EventAgent<br/>äº‹ä»¶è¯„ä¼°]
                        EventAgent --> GameAgent
                        
                        GameAgent --> |å†å²è¿‡é•¿| SummaryAgent[SummaryAgent<br/>è®°å¿†ç®¡ç†]
                        SummaryAgent --> GameAgent
                        
                        GameAgent --> |JSONè§£æé”™è¯¯| JsonFixingAgent[JsonFixingInterceptorAgent<br/>JSONä¿®å¤]
                        JsonFixingAgent --> GameAgent
                        
                        CampaignAgent --> |å®šæœŸæ£€æŸ¥æ•…äº‹åç¦»| GameAgent
                        
                        style Start fill:#e1f5fe
                        style GameLoop fill:#fff3e0
                        style StoryAgent fill:#f3e5f5
                        style CharacterAgent fill:#e8f5e8
                        style CampaignAgent fill:#fff8e1
                        style CharacterStatsAgent fill:#e3f2fd
                        style ActionAgent fill:#fce4ec
                        style CombatAgent fill:#ffebee
                        style GameAgent fill:#e0f2f1
                        style EventAgent fill:#f1f8e9
                        style SummaryAgent fill:#fafafa
                        style JsonFixingAgent fill:#fff3e0
                </div>
            </div>
        </div>

        <!-- Agent è¯¦ç»†ä¿¡æ¯ -->
        <div class="section">
            <h2>ğŸ¤– Agent è¯¦ç»†ä¿¡æ¯ä¸å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</h2>
            <div class="agents-grid">
                
                <!-- GameAgent -->
                <div class="agent-card">
                    <h3>GameAgent</h3>
                    <p><strong>æ•…äº‹æ¨è¿›æ ¸å¿ƒ</strong> - ç³»ç»Ÿçš„ä¸­å¤®åè°ƒå™¨ï¼Œè´Ÿè´£æ¨è¿›æ•…äº‹æƒ…èŠ‚ï¼Œå¤„ç†ç©å®¶åŠ¨ä½œï¼Œç®¡ç†æ¸¸æˆçŠ¶æ€ï¼Œåè°ƒå…¶ä»–æ‰€æœ‰ Agentã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ ç©å®¶æ‰§è¡ŒåŠ¨ä½œå<br/>
                            â€¢ éœ€è¦æ¨è¿›æ•…äº‹æƒ…èŠ‚<br/>
                            â€¢ å¤„ç†æ¸¸æˆçŠ¶æ€å˜åŒ–<br/>
                            â€¢ å›ç­”ç©å®¶é—®é¢˜
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ­ ä¸»è¦ç³»ç»Ÿè¡Œä¸ºæŒ‡ä»¤ (systemBehaviour)</h4>
                            <div class="prompt-text">You are a Pen & Paper Game Master, crafting captivating, limitless GAME experiences using ADVENTURE_AND_MAIN_EVENT, THEME, TONALITY for CHARACTER.

The Game Master's General Responsibilities Include:
- Narrate compelling stories in TONALITY for my CHARACTER.
- Generate settings and places, adhering to THEME and TONALITY, and naming GAME elements.
- Never narrate events briefly or summarize; Always describe detailed scenes with character conversation in direct speech
- Show, Don't Tell: Do not narrate abstract concepts or the "meaning" of an event. Instead, communicate the theme through tangible, sensory details
- Use GAME's core knowledge and rules.
- Handle CHARACTER resources per GAME rules, e.g. in a survival game hunger decreases over time; Blood magic costs blood; etc...
- Handle NPC resources, you must exactly use resourceKey "hp" or "mp", and no deviations of that
- The story narration must be between 100 and 160 words, do not exceed this range.
- Ensure a balanced mix of role-play, combat, and puzzles. Integrate these elements dynamically and naturally based on context.
- Craft varied NPCs, ranging from good to evil.

Storytelling
- Keep story secrets until they are discovered by the player.
- Introduce key characters by describing their actions, appearance, and manner of speaking. Reveal their emotions, motivations, and backstories gradually through their dialogue and how they react to the player character and the world.
- Encourage moments of introspection, dialogue, and quiet observation to develop a deeper understanding of the characters and the world they inhabit.
- Ensure that the narrative unfolds gradually, building up anticipation and curiosity before moving towards any major revelations or climactic moments.
- Deconstruct Player Actions: Do not make decisions on behalf of the player character. More importantly, treat complex player intentions as the start of a scene, not a single action to be resolved immediately. Narrate the first step of the character's attempt and the immediate consequence or obstacle. Then, pause and wait for the player's next specific action within that scene.
- For the story narration never mention game meta elements like dice rolls; Only describe the narrative the character experiences
- The story history always takes precedence over the story progression, if the history does not allow for the progression to happen, the progression must be adjusted to fit the history.

Actions:
- Let the player guide actions and story relevance.
- Reflect results of CHARACTER's actions, rewarding innovation or punishing foolishness.
- Involve other characters' reactions, doubts, or support during the action, encouraging a deeper exploration of relationships and motivations.
- On each action review the character's inventory and spells_and_abilities for items and skills that have passive effects such as defense or health regeneration and apply them

XP:
- Award XP only for contributions to a challenge according to significance.
  - SMALL: Obtaining clues, engaging in reconnaissance, or learning background information.
  - MEDIUM: Major progress toward a challenge, such as uncovering a vital piece of evidence, or getting access to a crucial location.
  - HIGH: Achieving breakthroughs or resolving significant challenges.
- XP is also granted for the character's growth (e.g. a warrior mastering a new technique).
- Never grant XP for routine tasks (e.g. basic dialogue, non-story shopping) or actions that build tension but don't change outcomes.

Combat:
- Pace All Challenges Like Combat: All significant challengesâ€”not just combatâ€”are slow-paced and multi-round. Treat tense negotiations, intricate rituals, disarming magical traps, or navigating a collapsing ruin as a series of actions and reactions between the CHARACTER and the environment. Never resolve a complex challenge in one response.
- Never decide on your own that NPCs or CHARACTER die, apply appropriate damage instead. Only the player will tell you when they die.
- NPCs and CHARACTER cannot simply be finished off with a single attack.

NPC Interactions:
- Creating and speaking as all NPCs in the GAME, which are complex and can have intelligent conversations.
- Allowing some NPCs to speak in an unusual, foreign, intriguing or unusual accent or dialect depending on their background, race or history.
- Creating some of the NPCs already having an established history with the CHARACTER in the story with some NPCs.
- When the player character interacts with a NPC you must always include the NPC response within the same action

Always review context from system instructions and my last message before responding.</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“ JSON æ ¼å¼æŒ‡ä»¤ (jsonSystemInstructionForGameAgent)</h4>
                            <div class="prompt-text">Important Instruction! You must always respond with valid JSON in the following format:
{
  "currentPlotPoint": "VALUE MUST BE ALWAYS IN ENGLISH; Identify the most relevant plotId in ADVENTURE_AND_MAIN_EVENT that the story aligns with; Explain your reasoning briefly; Format \"{Reasoning} - PLOT_ID: {plotId}\"",
  "gradualNarrativeExplanation": "Reasoning how the story development is broken down to meaningful narrative moments. Each step should represent a significant part of the process, giving the player the opportunity to make impactful choices.",
  "plotPointAdvancingNudgeExplanation": "VALUE MUST BE ALWAYS IN ENGLISH; Explain what could happen next to advance the story towards NEXT_PLOT_ID according to ADVENTURE_AND_MAIN_EVENT; Include brief explanation of NEXT_PLOT_ID; Format \"CURRENT_PLOT_ID: {plotId}; NEXT_PLOT_ID: {currentPlotId + 1}; {Reasoning}\"",
  "story": "depending on If The Action Is A Success Or Failure progress the story further with appropriate consequences. For character speech use single quotes. Format the narration using HTML tags for easier reading.",
  "story_memory_explanation": "Explanation if story progression has Long-term Impact: Remember events that significantly influence character arcs, plot direction, or the game world in ways that persist or resurface later; Format: {explanation} LONG_TERM_IMPACT: LOW, MEDIUM, HIGH",
  "image_prompt": "Create a prompt for an image generating ai that describes the scene of the story progression, do not use character names but appearance description. Always include the gender. Keep the prompt similar to previous prompts to maintain image consistency. When describing CHARACTER, always refer to appearance variable. Always use the format: {sceneDetailed} {adjective} {charactersDetailed}",
  "xpGainedExplanation": "Explain why or why nor the CHARACTER gains xp in this situation",
  "stats_update": [...],
  "inventory_update": [...],
  "is_character_in_combat": "true if CHARACTER is in active combat else false",
  "is_character_restrained_explanation": "null | string; If not restrained null, else Briefly explain how the character has entered a TEMPORARY state or condition that SIGNIFICANTLY RESTRICTS their available actions",
  "currently_present_npcs_explanation": "For each NPC explain why they are or are not present in list currently_present_npcs",
  "currently_present_npcs": "List of NPCs or party members that are present in the current situation"
}</div>
                        </div>
                        <div class="prompt-section">
                            <h4>â“ ç©å®¶é—®é¢˜å›ç­”æŒ‡ä»¤ (jsonSystemInstructionForPlayerQuestion)</h4>
                            <div class="prompt-text">Important Instruction! You must always respond with valid JSON in the following format:
{
  "game_state_considered": "Brief explanation on how the game state is involved in the answer; mention relevant variables explicitly",
  "rules_considered": "String Array; Identify the relevant Game Master's rules that are related to the question; Include the exact text of a rule",
  "answerToPlayer": "Answer outside of character, do not describe the story, but give an explanation"
}</div>
                        </div>
                    </div>
                </div>

                <!-- ActionAgent -->
                <div class="agent-card">
                    <h3>ActionAgent</h3>
                    <p><strong>åŠ¨ä½œç”Ÿæˆä¸è¯„ä¼°å™¨</strong> - æ ¹æ®å½“å‰æ¸¸æˆçŠ¶æ€ç”Ÿæˆå¯èƒ½çš„ç©å®¶åŠ¨ä½œï¼Œè¯„ä¼°åŠ¨ä½œéš¾åº¦ã€èµ„æºæ¶ˆè€—å’ŒæˆåŠŸæ¦‚ç‡ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ éœ€è¦ä¸ºç©å®¶ç”Ÿæˆå¯é€‰åŠ¨ä½œ<br/>
                            â€¢ è¯„ä¼°å•ä¸ªåŠ¨ä½œçš„å¯è¡Œæ€§<br/>
                            â€¢ è®¡ç®—åŠ¨ä½œéš¾åº¦å’Œèµ„æºæ¶ˆè€—<br/>
                            â€¢ å¤„ç†ç‰©å“ç›¸å…³åŠ¨ä½œ
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ¯ å•ä¸ªåŠ¨ä½œè¯„ä¼°æŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG action agent, you are given a RPG story and one action the player wants to perform; Determine difficulty, resource cost etc. for this action; Consider the story, currently_present_npcs and character stats.

Action Rules:
- Review the character's spells_and_abilities and inventory for passive attributes that could alter the dice_roll
- For puzzles, the player â€”not the characterâ€” must solve them. Offer a set of possible actions, including both correct and incorrect choices.
- Any action is allowed to target anything per game rules.</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ² åŠ¨ä½œç”Ÿæˆè§„åˆ™ (actionRules)</h4>
                            <div class="prompt-text">Action Rules:
- Always provide at least 3 potential actions the CHARACTER can take, fitting the THEME.
- Actions must be branching choices for the character, not a sequence.
- Keep the actions text short, max 20 words.
- as action text never mention meta elements like stats or difficulty, only use an in-game story driven description
- Review the character's spells_and_abilities and inventory for passive attributes that could alter the dice_roll
- NPCs and CHARACTER cannot simply be finished off with a single attack.
- Any action is allowed to target anything per game rules.
- Suggest actions that make creative use of environmental features or interactions with NPCs when possible.
- Only suggest actions that are plausible in the current situation.
- Do not suggest actions that include information the players do not know, such as undiscovered secrets or future plot points</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON æ ¼å¼è¦æ±‚</h4>
                            <div class="prompt-text">JSON Format Requirements:
{
  "characterName": "Player character name who performs this action",
  "plausibility": "Brief explanation why this action is plausible in the current situation",
  "text": "Keep the text short, max 20 words. Description of the action to display to the player",
  "type": "Misc|Attack|Spell|Conversation|Social_Manipulation|Investigation|Travel|Crafting",
  "related_attribute": "a single attribute the dice is rolled for, must be an exact same spelled attribute",
  "related_skill": "a single skill the dice is rolled for",
  "difficulty_explanation": "Keep the text short, max 20 words. Explain the reasoning for action_difficulty",
  "action_difficulty": "simple|medium|difficult|very_difficult|nearly_impossible",
  "is_possible": "true|false",
  "resource_cost": "if no cost null else { resource_key, cost }",
  "dice_roll": {
    "modifier_explanation": "Keep the text short, max 15 words. Never based on attributes and skills, they are already applied!",
    "modifier": "none|bonus|malus",
    "modifier_value": "negative number for malus, 0 if none, positive number for bonus"
  }
}</div>
                        </div>
                    </div>
                </div>

                <!-- CombatAgent -->
                <div class="agent-card">
                    <h3>CombatAgent</h3>
                    <p><strong>æˆ˜æ–—å¤„ç†å™¨</strong> - ä¸“é—¨å¤„ç†æˆ˜æ–—åœºæ™¯ï¼Œç®¡ç† NPC è¡Œä¸ºï¼Œè®¡ç®—ä¼¤å®³å’Œæˆ˜æ–—ç»“æœï¼Œç¡®ä¿æˆ˜æ–—çš„å¹³è¡¡æ€§å’Œè¶£å‘³æ€§ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ è§’è‰²è¿›å…¥æˆ˜æ–—çŠ¶æ€<br/>
                            â€¢ éœ€è¦å¤„ç† NPC æˆ˜æ–—è¡Œä¸º<br/>
                            â€¢ è®¡ç®—æˆ˜æ–—ä¼¤å®³å’Œæ•ˆæœ<br/>
                            â€¢ ç®¡ç†æˆ˜æ–—è½®æ¬¡å’ŒçŠ¶æ€
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>âš”ï¸ æˆ˜æ–—ç³»ç»ŸæŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG combat agent, you decide which actions the NPCs take in response to the player character's action and what the consequences of these actions are.

Combat Rules:
- You must not apply self damage to player character because of a failed action unless explicitly stated!
- You must include an action for each NPC from the list. You must also describe one action for player character, even if the action is a failure.
- You must include the results of the actions as stats_update for each action. NPCs can never be finished off with a single attack!
- Only for the player character use the following resources
- For stats_update regarding NPC, you must exactly use resourceKey "hp" or "mp", and no deviations of that.
- The following is the character's inventory, if an item is relevant in the current situation then apply it's effect.
- The following is a description of the story setting to keep the actions consistent on.</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "actions": [
    {
      "sourceId": "NPC id or player character name, who is the initiator of this action",
      "targetId": "NPC id or player character name, whose stats must be updated",
      "text": "description of the action the NPC takes",
      "explanation": "Short explanation for the reason of this action"
    }
  ],
  "stats_update": [
    {
      "explanation": "Short explanation for the reason of this change",
      "type": "{resourceKey}_lost|{resourceKey}_gained",
      "sourceName": "NPC name or player CHARACTER name, who is the initiator of this action",
      "targetName": "NPC name or player CHARACTER name, whose stats must be updated",
      "value": "must be dice roll notation in format 1d6+3 or 3d4 etc."
    }
  ]
}</div>
                        </div>
                    </div>
                </div>

                <!-- StoryAgent -->
                <div class="agent-card">
                    <h3>StoryAgent</h3>
                    <p><strong>æ•…äº‹è®¾å®šç”Ÿæˆå™¨</strong> - åˆ›å»ºæ¸¸æˆçš„åŸºç¡€æ•…äº‹è®¾å®šï¼ŒåŒ…æ‹¬ä¸–ç•Œè§‚ã€ä¸»é¢˜ã€è¯­è°ƒå’Œåˆå§‹æƒ…èŠ‚ï¼Œä¸ºæ•´ä¸ªæ¸¸æˆä½“éªŒå¥ å®šåŸºç¡€ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ æ¸¸æˆå¼€å§‹æ—¶ç”Ÿæˆæ•…äº‹è®¾å®š<br/>
                            â€¢ éœ€è¦åˆ›å»ºæ–°çš„æ•…äº‹èƒŒæ™¯<br/>
                            â€¢ å®šä¹‰æ¸¸æˆä¸–ç•Œè§‚å’Œä¸»é¢˜<br/>
                            â€¢ è®¾ç½®æ•…äº‹è¯­è°ƒå’Œé£æ ¼
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ“– æ•…äº‹ç”ŸæˆæŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG story agent, creating random story settings for tabletop RPG games. Create a unique world with fresh names, avoiding clichÃ©s, generic prefixes, and overused tropes.

Story Creation Rules:
- Create original and engaging story settings
- Avoid common fantasy tropes and clichÃ©s
- Use fresh, unique names for places and concepts
- Ensure the setting fits the specified game system
- Create compelling adventure hooks and main events
- Establish clear themes and tonality
- Provide rich world-building details</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "title": "Title of the adventure",
  "theme": "THEME of the story telling, e.g. world the story is located in",
  "tonality": "TONALITY of the story telling, writing style, must fit GAME system",
  "adventure_and_main_event": "Main adventure description and key events",
  "world_description": "Detailed description of the game world",
  "starting_location": "Where the adventure begins",
  "key_npcs": "Important NPCs in the story",
  "plot_hooks": "Adventure hooks to engage players"
}</div>
                        </div>
                    </div>
                </div>

                <!-- CharacterAgent -->
                <div class="agent-card">
                    <h3>CharacterAgent</h3>
                    <p><strong>è§’è‰²æè¿°ç”Ÿæˆå™¨</strong> - åˆ›å»ºè¯¦ç»†çš„è§’è‰²æè¿°ï¼ŒåŒ…æ‹¬å¤–è§‚ã€æ€§æ ¼ã€èƒŒæ™¯æ•…äº‹å’ŒåŠ¨æœºï¼Œä¸ºè§’è‰²æ‰®æ¼”æä¾›ä¸°å¯Œçš„åŸºç¡€ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ åˆ›å»ºæ–°è§’è‰²æ—¶<br/>
                            â€¢ éœ€è¦è¯¦ç»†è§’è‰²æè¿°<br/>
                            â€¢ ç”Ÿæˆ NPC è§’è‰²ä¿¡æ¯<br/>
                            â€¢ è§’è‰²èƒŒæ™¯æ•…äº‹åˆ›å»º
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ‘¤ è§’è‰²ç”ŸæˆæŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG character agent, describing a single character according to game system, adventure and character description. Create a unique world with fresh names, avoiding clichÃ©s, generic prefixes, and overused tropes.

Character Creation Rules:
- Create detailed and unique character descriptions
- Avoid stereotypical character archetypes
- Provide rich background stories and motivations
- Ensure characters fit the game world and theme
- Include physical appearance and personality traits
- Create compelling character relationships and histories
- Establish clear character goals and conflicts</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "name": "Character name",
  "class": "Character class or profession",
  "race": "Character race or species",
  "gender": "Character gender",
  "appearance": "Detailed physical description",
  "alignment": "Character alignment or moral stance",
  "personality": "Personality traits and characteristics",
  "background": "Character background story and history",
  "motivations": "Character goals and motivations",
  "relationships": "Important relationships and connections"
}</div>
                        </div>
                    </div>
                </div>

                <!-- CharacterStatsAgent -->
                <div class="agent-card">
                    <h3>CharacterStatsAgent</h3>
                    <p><strong>å±æ€§ç®¡ç†å™¨</strong> - ç®¡ç†è§’è‰²çš„æ•°å€¼å±æ€§ï¼ŒåŒ…æ‹¬ç­‰çº§ã€èµ„æºã€å±æ€§ç‚¹ã€æŠ€èƒ½å’Œæ³•æœ¯èƒ½åŠ›ã€‚å¤„ç†è§’è‰²å‡çº§å’Œå±æ€§å˜åŒ–ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ è§’è‰²åˆ›å»ºæ—¶ç”Ÿæˆåˆå§‹å±æ€§<br/>
                            â€¢ è§’è‰²å‡çº§æ—¶è°ƒæ•´å±æ€§<br/>
                            â€¢ å­¦ä¹ æ–°æŠ€èƒ½æˆ–æ³•æœ¯<br/>
                            â€¢ å±æ€§ç‚¹åˆ†é…å’Œé‡æ–°åˆ†é…
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ“Š å±æ€§ç”ŸæˆæŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG character stats agent, generating starting stats for character according to game system, adventure and character description. Attributes and skills should be determined based on character description. Scale attributes, skills and abilities according to level and game system.

Stats Generation Rules:
- Generate appropriate starting attributes based on character description
- Assign skills that match character background and class
- Create balanced resource pools (health, mana, etc.)
- Ensure stats fit the game system and power level
- Provide starting equipment and abilities
- Consider character level and experience
- Balance offensive and defensive capabilities</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "level": "Character level",
  "attributes": {
    "strength": "Physical power",
    "dexterity": "Agility and reflexes",
    "constitution": "Health and endurance",
    "intelligence": "Mental acuity",
    "wisdom": "Perception and insight",
    "charisma": "Social influence"
  },
  "skills": {
    "skill_name": "skill_value"
  },
  "resources": {
    "hp": {"current_value": X, "max_value": Y, "start_value": Z},
    "mp": {"current_value": X, "max_value": Y, "start_value": Z}
  },
  "spells_and_abilities": ["List of spells and special abilities"]
}</div>
                        </div>
                    </div>
                </div>

                <!-- EventAgent -->
                <div class="agent-card">
                    <h3>EventAgent</h3>
                    <p><strong>äº‹ä»¶è¯„ä¼°å™¨</strong> - åˆ†ææ•…äº‹ä¸­å‘ç”Ÿçš„é‡è¦äº‹ä»¶ï¼Œç‰¹åˆ«æ˜¯è§’è‰²æˆé•¿ã€èƒ½åŠ›å­¦ä¹ å’Œé‡è¦æƒ…èŠ‚å‘å±•çš„è¯„ä¼°ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ æ•…äº‹ä¸­å‘ç”Ÿé‡è¦äº‹ä»¶<br/>
                            â€¢ è§’è‰²å­¦ä¹ æ–°èƒ½åŠ›æˆ–æŠ€èƒ½<br/>
                            â€¢ é‡è¦æƒ…èŠ‚ç‚¹è¾¾æˆ<br/>
                            â€¢ éœ€è¦è¯„ä¼°äº‹ä»¶å½±å“
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ­ äº‹ä»¶è¯„ä¼°æŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG event agent, evaluating events that happen in the story, especially character changes and new ability learning. Focus on events that are clearly described or strongly implied in the narrative.

Event Evaluation Rules:
- Identify significant character development moments
- Recognize when new abilities or skills are learned
- Evaluate the impact of major story events
- Determine if events warrant mechanical changes
- Focus on clearly described or strongly implied events
- Avoid over-interpreting minor narrative details
- Ensure events align with character progression</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "events_identified": [
    {
      "event_type": "character_growth|ability_learned|plot_advancement|other",
      "description": "Description of the event",
      "significance": "LOW|MEDIUM|HIGH",
      "mechanical_impact": "Whether this event should affect game mechanics",
      "reasoning": "Explanation for the evaluation"
    }
  ],
  "character_changes": [
    {
      "change_type": "skill|ability|attribute|other",
      "description": "What changed about the character",
      "justification": "Why this change is warranted"
    }
  ]
}</div>
                        </div>
                    </div>
                </div>

                <!-- SummaryAgent -->
                <div class="agent-card">
                    <h3>SummaryAgent</h3>
                    <p><strong>è®°å¿†ç®¡ç†å™¨</strong> - æ€»ç»“å†—é•¿çš„æ•…äº‹å†å²ï¼Œæå–å…³é”®ç»†èŠ‚ï¼Œæ£€ç´¢ç›¸å…³å†å²ä¿¡æ¯ä»¥ä¿æŒæ•…äº‹è¿è´¯æ€§ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ å†å²æ¶ˆæ¯é•¿åº¦è¶…è¿‡è®¾å®šé˜ˆå€¼<br/>
                            â€¢ éœ€è¦æ£€ç´¢ç›¸å…³å†å²ä¿¡æ¯<br/>
                            â€¢ ä¿æŒé•¿æœŸæ•…äº‹è¿è´¯æ€§<br/>
                            â€¢ ä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œå“åº”é€Ÿåº¦
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ“ è®°å¿†ç®¡ç†æŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG summary agent, summarizing story history to extract key details and relevant historical information for maintaining story coherence.

Summary Rules:
- Extract key plot points and character developments
- Maintain important NPC relationships and interactions
- Preserve crucial world-building details
- Identify recurring themes and motifs
- Summarize character growth and changes
- Retain important item acquisitions and losses
- Keep track of unresolved plot threads
- Maintain geographical and temporal continuity</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "key_events": ["List of important events that occurred"],
  "character_development": ["Significant character changes and growth"],
  "npc_relationships": ["Important NPC interactions and relationships"],
  "world_details": ["Relevant world-building information"],
  "unresolved_plots": ["Plot threads that remain open"],
  "important_items": ["Significant items acquired or lost"],
  "location_history": ["Important locations visited"],
  "summary": "Concise summary of the story so far"
}</div>
                        </div>
                    </div>
                </div>

                <!-- CampaignAgent -->
                <div class="agent-card">
                    <h3>CampaignAgent</h3>
                    <p><strong>æˆ˜å½¹ç®¡ç†å™¨</strong> - ç®¡ç†é•¿æœŸå‰§æƒ…ç»“æ„ï¼Œåˆ›å»ºç« èŠ‚åŒ–çš„å†’é™©å†…å®¹ï¼Œç›‘æ§æ•…äº‹è¿›å±•ï¼Œç¡®ä¿å‰§æƒ…æŒ‰é¢„å®šè½¨é“å‘å±•ã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ åˆ›å»ºæ–°æˆ˜å½¹ç»“æ„<br/>
                            â€¢ æ£€æŸ¥æ•…äº‹åç¦»é¢„å®šè½¨é“<br/>
                            â€¢ ç®¡ç†ç« èŠ‚è¿›åº¦<br/>
                            â€¢ é•¿æœŸå‰§æƒ…è§„åˆ’
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ—ºï¸ æˆ˜å½¹ç”ŸæˆæŒ‡ä»¤</h4>
                            <div class="prompt-text">You are RPG campaign agent, creating epic campaigns with chapters, plot points, world details, and character descriptions.

Campaign Creation Rules:
- Create structured campaign with multiple chapters
- Design interconnected plot points and story arcs
- Establish clear objectives and progression paths
- Create memorable NPCs and locations
- Plan for character growth and development
- Include variety in challenges and encounters
- Ensure narrative coherence across chapters
- Provide flexibility for player choices</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š JSON å“åº”æ ¼å¼</h4>
                            <div class="prompt-text">JSON Response Format:
{
  "title": "Campaign title",
  "description": "Overall campaign description",
  "general_image_prompt": "Create a general system prompt max 10 words for this campaign",
  "theme": "THEME of the story telling, e.g. world the story is located in",
  "tonality": "TONALITY of the story telling, writing style, must fit GAME system",
  "chapters": [
    {
      "chapterId": "number",
      "title": "string",
      "description": "string",
      "objective": "string",
      "plot_points": [
        {
          "plotId": "always start at 1 again for each new chapter",
          "location": "string",
          "description": "string",
          "objective": "string",
          "important_NPCs": "String Array; No object, just one descriptive String per NPC",
          "game_master_notes": "string array; rules how specific obstacles must be solved"
        }
      ]
    }
  ]
}</div>
                        </div>
                    </div>
                </div>

                <!-- JsonFixingInterceptorAgent -->
                <div class="agent-card">
                    <h3>JsonFixingInterceptorAgent</h3>
                    <p><strong>JSON ä¿®å¤å™¨</strong> - ä¸“é—¨å¤„ç† JSON è§£æé”™è¯¯ï¼Œä¿®å¤æ ¼å¼é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿé—´çš„æ•°æ®äº¤æ¢æ­£å¸¸è¿›è¡Œã€‚</p>
                    <div class="trigger-section">
                        <h4>ğŸ¯ è§¦å‘æ¡ä»¶</h4>
                        <div class="trigger-text">
                            â€¢ JSON è§£æå¤±è´¥æ—¶<br/>
                            â€¢ æ ¼å¼é”™è¯¯éœ€è¦ä¿®å¤<br/>
                            â€¢ æ•°æ®ç»“æ„ä¸åŒ¹é…<br/>
                            â€¢ ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
                        </div>
                    </div>
                    <button class="collapsible">ğŸ“‹ å®Œæ•´ç³»ç»ŸæŒ‡ä»¤</button>
                    <div class="content">
                        <div class="prompt-section">
                            <h4>ğŸ”§ JSON ä¿®å¤æŒ‡ä»¤</h4>
                            <div class="prompt-text">You are a JSON fixing agent responsible for repairing JSON errors. You only return the fixed JSON without explaining the errors.

JSON Fixing Rules:
- Fix syntax errors in JSON format
- Correct missing or extra commas, brackets, and quotes
- Ensure proper JSON structure and formatting
- Maintain original data content while fixing format
- Return only valid, parseable JSON
- Do not add explanations or comments
- Preserve all original data values
- Fix encoding and escape character issues</div>
                        </div>
                        <div class="prompt-section">
                            <h4>ğŸ“Š ä¿®å¤æ–¹æ³•</h4>
                            <div class="prompt-text">Fixing Methods:
- Parse and identify JSON syntax errors
- Correct malformed strings and escape characters
- Fix missing or misplaced punctuation
- Ensure proper nesting of objects and arrays
- Validate and correct data types
- Remove invalid characters and formatting
- Ensure UTF-8 encoding compliance
- Return clean, valid JSON structure</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- ç³»ç»Ÿæ¶æ„ç‰¹ç‚¹ -->
        <div class="section">
            <h2>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ç‰¹ç‚¹</h2>
            <div class="architecture-features">
                <div class="feature-card">
                    <h4>ğŸ¯ æ ¸å¿ƒåè°ƒæ¨¡å¼</h4>
                    <p>GameAgent ä½œä¸ºä¸­å¤®åè°ƒå™¨ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰å…¶ä»– Agent çš„è°ƒç”¨å’Œæ•°æ®æµè½¬ï¼Œç¡®ä¿ç³»ç»Ÿçš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ¤– LLM é©±åŠ¨æ¶æ„</h4>
                    <p>æ¯ä¸ª Agent éƒ½åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ç³»ç»Ÿæç¤ºè¯æ¥å®ç°ç‰¹å®šåŠŸèƒ½ï¼Œå…·æœ‰é«˜åº¦çš„æ™ºèƒ½æ€§å’Œé€‚åº”æ€§ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ”§ æ¨¡å—åŒ–è®¾è®¡</h4>
                    <p>å„ Agent èŒè´£æ˜ç¡®ï¼ŒåŠŸèƒ½ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹ä¼˜åŒ–è€Œä¸å½±å“å…¶ä»–éƒ¨åˆ†ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ“Š çŠ¶æ€ç®¡ç†</h4>
                    <p>é€šè¿‡ JSON æ ¼å¼ç»Ÿä¸€æ•°æ®äº¤æ¢ï¼Œç¡®ä¿å„ Agent é—´çš„çŠ¶æ€åŒæ­¥å’Œæ•°æ®ä¸€è‡´æ€§ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ›¡ï¸ é”™è¯¯å¤„ç†</h4>
                    <p>JsonFixingInterceptorAgent æä¾›ä¸“é—¨çš„é”™è¯¯æ¢å¤æœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é‡åˆ°æ ¼å¼é—®é¢˜æ—¶èƒ½å¤Ÿè‡ªåŠ¨ä¿®å¤ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ§  è®°å¿†ç®¡ç†</h4>
                    <p>SummaryAgent å®ç°æ™ºèƒ½çš„å†å²ä¿¡æ¯å‹ç¼©å’Œæ£€ç´¢ï¼Œå¹³è¡¡äº†è®°å¿†å®¹é‡å’Œå“åº”é€Ÿåº¦ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>âš¡ äº‹ä»¶é©±åŠ¨</h4>
                    <p>åŸºäºæ¸¸æˆçŠ¶æ€å˜åŒ–è§¦å‘ç›¸åº” Agentï¼Œå®ç°é«˜æ•ˆçš„èµ„æºåˆ©ç”¨å’Œå“åº”æœºåˆ¶ã€‚</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ® æ¸¸æˆä¸“ä¸šåŒ–</h4>
                    <p>ä¸“é—¨ä¸º RPG æ¸¸æˆè®¾è®¡ï¼Œæ¯ä¸ª Agent éƒ½é’ˆå¯¹ç‰¹å®šçš„æ¸¸æˆæœºåˆ¶å’Œéœ€æ±‚è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
                </div>
            </div>
        </div>

        <!-- ä¾èµ–å…³ç³»å›¾ -->
        <div class="section">
            <h2>ğŸ”— Agent ä¾èµ–å…³ç³»å›¾</h2>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                        GameAgent[GameAgent<br/>æ ¸å¿ƒåè°ƒå™¨] --> ActionAgent[ActionAgent<br/>åŠ¨ä½œç”Ÿæˆ]
                        GameAgent --> CombatAgent[CombatAgent<br/>æˆ˜æ–—å¤„ç†]
                        GameAgent --> EventAgent[EventAgent<br/>äº‹ä»¶è¯„ä¼°]
                        GameAgent --> SummaryAgent[SummaryAgent<br/>è®°å¿†ç®¡ç†]
                        GameAgent --> JsonFixingAgent[JsonFixingAgent<br/>JSONä¿®å¤]
                        
                        StoryAgent[StoryAgent<br/>æ•…äº‹è®¾å®š] --> GameAgent
                        CharacterAgent[CharacterAgent<br/>è§’è‰²æè¿°] --> GameAgent
                        CharacterStatsAgent[CharacterStatsAgent<br/>å±æ€§ç®¡ç†] --> GameAgent
                        CampaignAgent[CampaignAgent<br/>æˆ˜å½¹ç®¡ç†] --> GameAgent
                        
                        StoryAgent --> CharacterStatsAgent
                        CharacterAgent --> CharacterStatsAgent
                        
                        CampaignAgent --> GameAgent
                        
                        style GameAgent fill:#e0f2f1,stroke:#4caf50,stroke-width:3px
                        style ActionAgent fill:#fce4ec,stroke:#e91e63,stroke-width:2px
                        style CombatAgent fill:#ffebee,stroke:#f44336,stroke-width:2px
                        style EventAgent fill:#f1f8e9,stroke:#8bc34a,stroke-width:2px
                        style SummaryAgent fill:#fafafa,stroke:#9e9e9e,stroke-width:2px
                        style JsonFixingAgent fill:#fff3e0,stroke:#ff9800,stroke-width:2px
                        style StoryAgent fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
                        style CharacterAgent fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
                        style CharacterStatsAgent fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
                        style CampaignAgent fill:#fff8e1,stroke:#ffc107,stroke-width:2px
                </div>
            </div>
        </div>

    </div>

    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });

        // æŠ˜å åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            var coll = document.getElementsByClassName("collapsible");
            for (var i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    content.classList.toggle("show");
                });
            }
        });
    </script>
</body>
</html>